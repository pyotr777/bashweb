<div class="default">
    DISCRIPTION<br>
    <input type="checkbox" id="use_self_signed" onclick="update_vars()"> Use self signed certificates
    <div id="SSL_info">
    DNS: <input type="text" id="DNS_txt_NNN" onchange="update_vars()" value="" size="50" /><br>
    Mail: <input type="text" id="MAIL_txt_NNN" onchange="update_vars()" value="kportal.aics.riken@gmail.com" size="50"/>
    </div>
    <input type=hidden id="command_NNN" value="COMMAND" />
    <input type=hidden id="args_NNN" value="" />
    <button class="hidden_button" id="exec_button_NNN" onclick="update_vars();exec(NNN)">exec</button>
</div>
<script>
    var i = 1;
    var JSONobj = {};
    function init_block() {
        console.log("init_block called with i="+i);
        $("#exec_button_NNN").attr('class', 'active_button');
        $("#DNS_txt_NNN").val(window.location.hostname);
        $('#use_self_signed').click(function() {
          $("#SSL_info").toggle(!this.checked);
        });
    }

    // Send data in JSON format, prepended with "COMMAND$"
    function update_vars() {
      if (document.getElementById('use_self_signed').checked) {
        JSONobj["KP_SELF_CERT"] = 1;
      } else {        
        JSONobj["KP_WEB_DNS"] = $("#DNS_txt_NNN").val();
        JSONobj["KP_WEB_MAIL"] = $("#MAIL_txt_NNN").val();
      }
      $("#args_NNN").val(JSON.stringify(JSONobj));
      console.log("Next command args: "+ $("#args_NNN").val());
    }
init_block();
</script>
